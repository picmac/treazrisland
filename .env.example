# TREAZRISLAND environment template
# Reference docs/TREAZRISLAND_PRD.md and docs/security/threat-model.md before populating.

# Backend core
NODE_ENV=development
PORT=3001
DATABASE_URL="postgresql://treazrisland:treazrisland@localhost:5432/treazrisland?schema=public"
JWT_SECRET=change-me-in-prod-please-rotate-32
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=30d
CORS_ALLOWED_ORIGINS=http://localhost:3000

# Rate limiting (tune per docs/security/hardening-checklist.md)
RATE_LIMIT_DEFAULT_POINTS=60
RATE_LIMIT_DEFAULT_DURATION=60
RATE_LIMIT_AUTH_POINTS=5
RATE_LIMIT_AUTH_DURATION=60

# Password and invitation policy
USER_INVITE_EXPIRY_HOURS=168
PASSWORD_MIN_LENGTH=8

# Object storage (MinIO/S3 compatible)
STORAGE_DRIVER=filesystem
STORAGE_LOCAL_ROOT=./var/storage
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY=treaz-admin
STORAGE_SECRET_KEY=treaz-secret
STORAGE_BUCKET_ASSETS=treaz-assets
STORAGE_BUCKET_ROMS=treaz-roms
STORAGE_BUCKET_BIOS=treaz-bios
ROM_UPLOAD_MAX_BYTES=1073741824

# PixelLab integration
PIXELLAB_API_KEY=your-pixellab-key
PIXELLAB_STYLE_ID=snES-monkey-island
PIXELLAB_BASE_URL=https://api.pixellab.ai
PIXELLAB_CACHE_TTL=86400

# Netplay signaling integration
NETPLAY_SERVICE_BASE_URL=http://localhost:4100
NETPLAY_SERVICE_API_KEY=replace-with-local-dev-token
NETPLAY_SESSION_DEFAULT_TTL_MINUTES=60
NETPLAY_SESSION_MIN_TTL_MINUTES=5
NETPLAY_SESSION_MAX_TTL_MINUTES=360
# Cleanup job removes expired sessions on this cadence; match worker/cron configuration
NETPLAY_SESSION_CLEANUP_CRON=*/5 * * * *

# ScreenScraper integration (admin must rotate their own values; do not commit plaintext secrets)
SCREENSCRAPER_USERNAME=
SCREENSCRAPER_PASSWORD=
# AES-256-GCM key used to decrypt the encrypted developer credentials; store outside of version control
SCREENSCRAPER_SECRET_KEY=
# Generate encrypted blobs with `npm run screenscraper:encrypt`
SCREENSCRAPER_DEV_ID_ENC=
SCREENSCRAPER_DEV_PASSWORD_ENC=
SCREENSCRAPER_BASE_URL=https://www.screenscraper.fr/api2
SCREENSCRAPER_REQUESTS_PER_MINUTE=30
SCREENSCRAPER_CONCURRENCY=2
SCREENSCRAPER_TIMEOUT_MS=15000
SCREENSCRAPER_DEFAULT_LANGUAGE_PRIORITY=en,fr
SCREENSCRAPER_DEFAULT_REGION_PRIORITY=us,eu,wor,jp
SCREENSCRAPER_DEFAULT_MEDIA_TYPES=box-2D,box-3D,wheel,marquee,screenshot,titlescreen
SCREENSCRAPER_ONLY_BETTER_MEDIA=true
SCREENSCRAPER_MAX_ASSETS_PER_TYPE=3

# Frontend
NEXT_PUBLIC_API_BASE_URL=http://localhost:3001
NEXT_PUBLIC_PIXEL_THEME=monkey-island

# Observability hooks
LOG_LEVEL=info
