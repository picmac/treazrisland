openapi: 3.0.3
info:
  title: TREAZRISLAND Netplay Mock
  version: 0.1.0
  description: |
    Minimal contract used for local development. The mock implements a subset of the
    planned Netplay service surface so the frontend and backend can exercise happy-path flows
    without depending on the production signaling fabric.
servers:
  - url: http://localhost:4011
paths:
  /health:
    get:
      summary: Health probe
      responses:
        '200':
          description: Service is ready
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
  /sessions:
    post:
      summary: Create a new Netplay session
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - hostNickname
              properties:
                hostNickname:
                  type: string
                  example: pixelPirate
                romId:
                  type: string
                  nullable: true
                  example: rom_123
                ttlMinutes:
                  type: integer
                  example: 60
      responses:
        '201':
          description: Session created
          content:
            application/json:
              schema:
                type: object
                properties:
                  sessionId:
                    type: string
                    example: sess_mock_1
                  joinCode:
                    type: string
                    example: FERN-PARGO
                  expiresAt:
                    type: string
                    format: date-time
                    example: 2025-01-25T18:42:00.000Z
                  relayHints:
                    type: array
                    items:
                      type: string
                    example:
                      - wss://relay.treazris.land/room/sess_mock_1
  /sessions/{sessionId}:
    get:
      summary: Retrieve session details
      parameters:
        - in: path
          name: sessionId
          required: true
          schema:
            type: string
          example: sess_mock_1
      responses:
        '200':
          description: Session info
          content:
            application/json:
              schema:
                type: object
                properties:
                  sessionId:
                    type: string
                  status:
                    type: string
                    example: ACTIVE
                  host:
                    type: object
                    properties:
                      id:
                        type: string
                        example: participant_host_1
                      nickname:
                        type: string
                        example: pixelPirate
                  participants:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          example: participant_joiner_2
                        nickname:
                          type: string
                          example: grogGuru
                        joinedAt:
                          type: string
                          format: date-time
                          example: 2025-01-25T18:00:00.000Z
    delete:
      summary: Cancel a session
      parameters:
        - in: path
          name: sessionId
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Session cancelled
  /sessions/join:
    post:
      summary: Join an existing Netplay session by join code
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - joinCode
                - nickname
              properties:
                joinCode:
                  type: string
                  example: FERN-PARGO
                nickname:
                  type: string
                  example: grogGuru
      responses:
        '200':
          description: Participant joined
          content:
            application/json:
              schema:
                type: object
                properties:
                  participantId:
                    type: string
                    example: participant_joiner_2
                  sessionId:
                    type: string
                    example: sess_mock_1
                  relayHints:
                    type: array
                    items:
                      type: string
                    example:
                      - wss://relay.treazris.land/room/sess_mock_1
