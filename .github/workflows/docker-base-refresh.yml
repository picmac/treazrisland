name: Docker Base Image Refresh

on:
  schedule:
    - cron: "30 5 * * 1"
  workflow_dispatch:

jobs:
  refresh:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Pull Node base images
        run: |
          docker pull node:24-bullseye
          docker image inspect node:24-bullseye --format 'Digest: {{index .RepoDigests 0}}'
      - name: Pull supporting runtime images
        run: |
          docker pull postgres:16-alpine
          docker pull minio/minio:RELEASE.2024-05-28T17-19-04Z
